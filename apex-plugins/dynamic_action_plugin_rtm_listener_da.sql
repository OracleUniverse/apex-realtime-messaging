prompt --application/set_environment
set define off verify off feedback off
whenever sqlerror exit sql.sqlcode rollback
--------------------------------------------------------------------------------
--
-- Oracle APEX export file
--
-- You should run this script using a SQL client connected to the database as
-- the owner (parsing schema) of the application or as a database user with the
-- APEX_ADMINISTRATOR_ROLE role.
--
-- This export file has been automatically generated. Modifying this file is not
-- supported by Oracle and can lead to unexpected application and/or instance
-- behavior now or in the future.
--
-- NOTE: Calls to apex_application_install override the defaults below.
--
--------------------------------------------------------------------------------
begin
wwv_flow_imp.import_begin (
 p_version_yyyy_mm_dd=>'2024.11.30'
,p_release=>'24.2.10'
,p_default_workspace_id=>100001
,p_default_application_id=>146
,p_default_id_offset=>0
,p_default_owner=>'WKSP_ORACLEVERSE'
);
end;
/
 
prompt APPLICATION 146 - Real-Time Messaging Plug-in
--
-- Application Export:
--   Application:     146
--   Name:            Real-Time Messaging Plug-in
--   Date and Time:   08:25 Tuesday November 11, 2025
--   Exported By:     ADMIN
--   Flashback:       0
--   Export Type:     Component Export
--   Manifest
--     PLUGIN: 43922973552184349
--   Manifest End
--   Version:         24.2.10
--   Instance ID:     7727405682615679
--

begin
  -- replace components
  wwv_flow_imp.g_mode := 'REPLACE';
end;
/
prompt --application/shared_components/plugins/dynamic_action/rtm_listener_da
begin
wwv_flow_imp_shared.create_plugin(
 p_id=>wwv_flow_imp.id(43922973552184349)
,p_plugin_type=>'DYNAMIC ACTION'
,p_name=>'RTM_LISTENER_DA'
,p_display_name=>'Real-Time Messaging - Listener (DA)'
,p_category=>'EXECUTE'
,p_javascript_file_urls=>'#PLUGIN_FILES#listener.js'
,p_plsql_code=>wwv_flow_string.join(wwv_flow_t_varchar2(
'FUNCTION renderListener (',
'    p_dynamic_action IN apex_plugin.t_dynamic_action,',
'    p_plugin         IN apex_plugin.t_plugin',
') RETURN apex_plugin.t_dynamic_action_render_result',
'IS',
'    l_result apex_plugin.t_dynamic_action_render_result;',
'BEGIN',
'    -- Pass the DA attributes through to JavaScript',
'    l_result.attribute_01 := p_dynamic_action.attribute_01; -- Base WebSocket URL',
'    l_result.attribute_02 := p_dynamic_action.attribute_02; -- Channel',
'    l_result.attribute_03 := p_dynamic_action.attribute_03; -- Event Name',
'    l_result.attribute_04 := p_dynamic_action.attribute_04; -- APEX Event Name',
'',
'    -- Tell APEX which JS function to call on the client',
'    l_result.javascript_function := ''renderListener'';',
'',
'    RETURN l_result;',
'END renderListener;',
''))
,p_api_version=>1
,p_render_function=>'renderListener'
,p_substitute_attributes=>true
,p_version_scn=>40224724071942
,p_subscribe_plugin_settings=>true
,p_version_identifier=>'1.0'
,p_files_version=>28
);
wwv_flow_imp_shared.create_plugin_attribute(
 p_id=>wwv_flow_imp.id(43923497466191791)
,p_plugin_id=>wwv_flow_imp.id(43922973552184349)
,p_attribute_scope=>'COMPONENT'
,p_attribute_sequence=>1
,p_display_sequence=>10
,p_prompt=>'Base WebSocket URL'
,p_attribute_type=>'TEXT'
,p_is_required=>false
,p_default_value=>'wss://rtm.oracleapex.cloud'
,p_is_translatable=>false
,p_help_text=>unistr('WebSocket endpoint of your RTM server (wss://\2026)')
);
wwv_flow_imp_shared.create_plugin_attribute(
 p_id=>wwv_flow_imp.id(43923786692197212)
,p_plugin_id=>wwv_flow_imp.id(43922973552184349)
,p_attribute_scope=>'COMPONENT'
,p_attribute_sequence=>2
,p_display_sequence=>20
,p_prompt=>'Channel'
,p_attribute_type=>'TEXT'
,p_is_required=>false
,p_default_value=>'test'
,p_is_translatable=>false
);
wwv_flow_imp_shared.create_plugin_attribute(
 p_id=>wwv_flow_imp.id(43924085954202808)
,p_plugin_id=>wwv_flow_imp.id(43922973552184349)
,p_attribute_scope=>'COMPONENT'
,p_attribute_sequence=>3
,p_display_sequence=>30
,p_prompt=>'Event Name'
,p_attribute_type=>'TEXT'
,p_is_required=>false
,p_default_value=>'ping'
,p_is_translatable=>false
,p_help_text=>'Message type to listen for (server sends eventName)'
);
wwv_flow_imp_shared.create_plugin_attribute(
 p_id=>wwv_flow_imp.id(43924367957207760)
,p_plugin_id=>wwv_flow_imp.id(43922973552184349)
,p_attribute_scope=>'COMPONENT'
,p_attribute_sequence=>4
,p_display_sequence=>40
,p_prompt=>'APEX Event Name'
,p_attribute_type=>'TEXT'
,p_is_required=>false
,p_default_value=>'rtm-message'
,p_is_translatable=>false
,p_help_text=>'Custom event name that will be fired in APEX (used in Dynamic Actions).'
);
end;
/
begin
wwv_flow_imp.g_varchar2_table := wwv_flow_imp.empty_varchar2_table;
wwv_flow_imp.g_varchar2_table(1) := '66756E6374696F6E2072656E6465724C697374656E657228206461436F6E746578742029207B0D0A202020202F2F204150455820444120706C75672D696E7320757375616C6C792070617373207468652064796E616D696320616374696F6E20636F6E74';
wwv_flow_imp.g_varchar2_table(2) := '65787420696E2C0D0A202020202F2F20627574206966206E6F742C202274686973222077696C6C2062652074686520636F6E746578742E0D0A2020202076617220637478203D206461436F6E74657874207C7C2074686973207C7C207B7D3B0D0A0D0A20';
wwv_flow_imp.g_varchar2_table(3) := '2020202F2F20506C75672D696E206174747269627574657320286B6565702073616D65206D617070696E6720796F7520616C726561647920757365290D0A20202020766172206261736555726C202020202020203D206374782E61747472696275746530';
wwv_flow_imp.g_varchar2_table(4) := '31207C7C20277773733A2F2F72746D2E6F7261636C65617065782E636C6F7564273B0D0A20202020766172206368616E6E656C202020202020203D206374782E6174747269627574653032207C7C202774657374273B0D0A20202020766172206576656E';
wwv_flow_imp.g_varchar2_table(5) := '744E616D6520202020203D206374782E6174747269627574653033207C7C202770696E67273B0D0A2020202076617220617065784576656E744E616D65203D206374782E6174747269627574653034207C7C202772746D2D6D657373616765273B0D0A0D';
wwv_flow_imp.g_varchar2_table(6) := '0A202020202F2F205265636F6E6E6563742064656C617920286D732920E2809320686172642D636F6465642C206F722061646420616E6F746865722061747472696275746520696620796F75206C696B650D0A20202020766172205245434F4E4E454354';
wwv_flow_imp.g_varchar2_table(7) := '5F44454C4159203D20333030303B0D0A0D0A202020202F2F20496620776520616C7265616479206861766520616E206F70656E20736F636B657420666F72207468697320636F6E746578742C2072657573652069740D0A20202020696620286374782E5F';
wwv_flow_imp.g_varchar2_table(8) := '72746D536F636B6574202626206374782E5F72746D536F636B65742E72656164795374617465203D3D3D20576562536F636B65742E4F50454E29207B0D0A2020202020202020636F6E736F6C652E6C6F67282752544D206C697374656E65723A20736F63';
wwv_flow_imp.g_varchar2_table(9) := '6B657420616C7265616479206F70656E2C2072657573696E673A272C206261736555726C293B0D0A202020202020202072657475726E3B0D0A202020207D0D0A0D0A202020202F2F2048616E646C65206F6E65206465636F646564206D65737361676520';
wwv_flow_imp.g_varchar2_table(10) := '6F626A6563740D0A2020202066756E6374696F6E2068616E646C654D657373616765286D736729207B0D0A20202020202020202F2F2046696C746572206279206368616E6E656C202F206576656E742069662070726573656E740D0A2020202020202020';
wwv_flow_imp.g_varchar2_table(11) := '696620286D73672E6368616E6E656C202626206D73672E6368616E6E656C20213D3D206368616E6E656C29207B0D0A20202020202020202020202072657475726E3B0D0A20202020202020207D0D0A2020202020202020696620286D73672E6576656E74';
wwv_flow_imp.g_varchar2_table(12) := '4E616D65202626206D73672E6576656E744E616D6520213D3D206576656E744E616D6529207B0D0A20202020202020202020202072657475726E3B0D0A20202020202020207D0D0A0D0A2020202020202020636F6E736F6C652E6C6F67282752544D206C';
wwv_flow_imp.g_varchar2_table(13) := '697374656E6572207265636569766564206D6573736167653A272C206D7367293B0D0A0D0A20202020202020202F2F204966207061796C6F6164206973207B206974656D4E616D653A20225031305F4D455353414745222C2076616C75653A202248656C';
wwv_flow_imp.g_varchar2_table(14) := '6C6F22207D0D0A20202020202020202F2F207468656E2075706461746520746861742041504558206974656D206175746F6D61746963616C6C790D0A2020202020202020696620286D73672E7061796C6F61642026260D0A202020206D73672E7061796C';
wwv_flow_imp.g_varchar2_table(15) := '6F61642E6974656D4E616D652026260D0A20202020747970656F66206D73672E7061796C6F61642E76616C756520213D3D2027756E646566696E6564272026260D0A202020206D73672E7061796C6F61642E76616C756520213D3D206E756C6C2026260D';
wwv_flow_imp.g_varchar2_table(16) := '0A202020206D73672E7061796C6F61642E76616C756520213D3D2027272026262020202020202F2F20F09F91882069676E6F726520656D70747920737472696E670D0A2020202077696E646F772E6170657820262620617065782E6974656D290D0A7B0D';
wwv_flow_imp.g_varchar2_table(17) := '0A20202020747279207B0D0A2020202020202020617065782E6974656D286D73672E7061796C6F61642E6974656D4E616D65292E73657456616C7565286D73672E7061796C6F61642E76616C7565293B0D0A2020202020202020636F6E736F6C652E6C6F';
wwv_flow_imp.g_varchar2_table(18) := '67280D0A202020202020202020202752544D206C697374656E65723A20736574272C0D0A202020202020202020206D73672E7061796C6F61642E6974656D4E616D652C0D0A2020202020202020202027746F272C0D0A202020202020202020206D73672E';
wwv_flow_imp.g_varchar2_table(19) := '7061796C6F61642E76616C75650D0A2020202020202020293B0D0A202020207D20636174636820286529207B0D0A2020202020202020636F6E736F6C652E7761726E280D0A202020202020202020202752544D206C697374656E65723A20636F756C6420';
wwv_flow_imp.g_varchar2_table(20) := '6E6F74207365742041504558206974656D272C0D0A202020202020202020206D73672E7061796C6F61642E6974656D4E616D652C0D0A20202020202020202020650D0A2020202020202020293B0D0A202020207D0D0A7D0D0A0D0A0D0A20202020202020';
wwv_flow_imp.g_varchar2_table(21) := '202F2F2046697265206F7572204150455820637573746F6D206576656E7420736F206F746865722044796E616D696320416374696F6E732063616E2072656163740D0A20202020202020206966202877696E646F772E6170657820262620617065782E65';
wwv_flow_imp.g_varchar2_table(22) := '76656E7420262620617065782E6576656E742E7472696767657229207B0D0A202020202020202020202020617065782E6576656E742E7472696767657228646F63756D656E742C20617065784576656E744E616D652C206D7367293B0D0A202020202020';
wwv_flow_imp.g_varchar2_table(23) := '20207D0D0A202020207D0D0A0D0A202020202F2F20436F6E6E6563742066756E6374696F6E2077697468206175746F2D7265636F6E6E656374206C6F6769630D0A2020202066756E6374696F6E20636F6E6E6563742829207B0D0A202020202020202063';
wwv_flow_imp.g_varchar2_table(24) := '6F6E736F6C652E6C6F67280D0A202020202020202020202752544D206C697374656E657220636F6E6E656374696E6720746F272C0D0A202020202020202020206261736555726C2C0D0A20202020202020202020276368616E6E656C3D272C0D0A202020';
wwv_flow_imp.g_varchar2_table(25) := '202020202020206368616E6E656C2C0D0A20202020202020202020276576656E743D272C0D0A202020202020202020206576656E744E616D650D0A2020202020202020293B0D0A0D0A202020202020202076617220736F636B6574203D206E6577205765';
wwv_flow_imp.g_varchar2_table(26) := '62536F636B6574286261736555726C293B0D0A20202020202020206374782E5F72746D536F636B6574203D20736F636B65743B20202F2F206B656570207265666572656E6365206F6E2074686520444120636F6E746578740D0A0D0A2020202020202020';
wwv_flow_imp.g_varchar2_table(27) := '736F636B65742E6F6E6F70656E203D2066756E6374696F6E202829207B0D0A202020202020202020202020636F6E736F6C652E6C6F67282752544D206C697374656E657220636F6E6E65637465643A272C206261736555726C293B0D0A20202020202020';
wwv_flow_imp.g_varchar2_table(28) := '207D3B0D0A0D0A2020202020202020736F636B65742E6F6E6D657373616765203D2066756E6374696F6E202865767429207B0D0A202020202020202020202020766172206D73673B0D0A202020202020202020202020747279207B0D0A20202020202020';
wwv_flow_imp.g_varchar2_table(29) := '2020202020202020206D7367203D204A534F4E2E7061727365286576742E64617461293B0D0A2020202020202020202020207D20636174636820286529207B0D0A20202020202020202020202020202020636F6E736F6C652E6572726F72282752544D20';
wwv_flow_imp.g_varchar2_table(30) := '6C697374656E65723A20696E76616C6964204A534F4E272C20652C206576742E64617461293B0D0A2020202020202020202020202020202072657475726E3B0D0A2020202020202020202020207D0D0A20202020202020202020202068616E646C654D65';
wwv_flow_imp.g_varchar2_table(31) := '7373616765286D7367293B0D0A20202020202020207D3B0D0A0D0A2020202020202020736F636B65742E6F6E636C6F7365203D2066756E6374696F6E202865767429207B0D0A202020202020202020202020636F6E736F6C652E6C6F67282752544D206C';
wwv_flow_imp.g_varchar2_table(32) := '697374656E657220636C6F7365643A272C206576742E636F64652C206576742E726561736F6E207C7C202727293B0D0A0D0A2020202020202020202020202F2F2031303030203D206E6F726D616C20636C6F737572652C2031303031203D20676F696E67';
wwv_flow_imp.g_varchar2_table(33) := '206177617920287061676520756E6C6F6164290D0A2020202020202020202020202F2F204F6E6C79206175746F2D7265636F6E6E65637420666F722022756E65787065637465642220636C6F73757265730D0A2020202020202020202020206966202865';
wwv_flow_imp.g_varchar2_table(34) := '76742E636F646520213D3D2031303030202626206576742E636F646520213D3D203130303129207B0D0A20202020202020202020202020202020636F6E736F6C652E6C6F67280D0A2020202020202020202020202020202020202752544D206C69737465';
wwv_flow_imp.g_varchar2_table(35) := '6E65723A207265636F6E6E656374696E6720696E2027202B205245434F4E4E4543545F44454C4159202B2027206D732E2E2E270D0A20202020202020202020202020202020293B0D0A2020202020202020202020202020202073657454696D656F757428';
wwv_flow_imp.g_varchar2_table(36) := '636F6E6E6563742C205245434F4E4E4543545F44454C4159293B0D0A2020202020202020202020207D0D0A20202020202020207D3B0D0A0D0A2020202020202020736F636B65742E6F6E6572726F72203D2066756E6374696F6E202865727229207B0D0A';
wwv_flow_imp.g_varchar2_table(37) := '202020202020202020202020636F6E736F6C652E6572726F72282752544D206C697374656E6572206572726F723A272C20657272293B0D0A20202020202020207D3B0D0A202020207D0D0A0D0A202020202F2F20496E697469616C20636F6E6E6563740D';
wwv_flow_imp.g_varchar2_table(38) := '0A20202020636F6E6E65637428293B0D0A7D0D0A';
end;
/
begin
wwv_flow_imp_shared.create_plugin_file(
 p_id=>wwv_flow_imp.id(43924874544261088)
,p_plugin_id=>wwv_flow_imp.id(43922973552184349)
,p_file_name=>'listener.js'
,p_mime_type=>'text/javascript'
,p_file_charset=>'utf-8'
,p_file_content=>wwv_flow_imp.varchar2_to_blob(wwv_flow_imp.g_varchar2_table)
);
end;
/
begin
wwv_flow_imp.g_varchar2_table := wwv_flow_imp.empty_varchar2_table;
wwv_flow_imp.g_varchar2_table(1) := '66756E6374696F6E2072656E6465724C697374656E65722865297B766172206F3D657C7C746869737C7C7B7D2C743D6F2E61747472696275746530317C7C227773733A2F2F72746D2E6F7261636C65617065782E636C6F7564222C6E3D6F2E6174747269';
wwv_flow_imp.g_varchar2_table(2) := '6275746530327C7C2274657374222C613D6F2E61747472696275746530337C7C2270696E67222C6C3D6F2E61747472696275746530347C7C2272746D2D6D657373616765223B6F2E5F72746D536F636B657426266F2E5F72746D536F636B65742E726561';
wwv_flow_imp.g_varchar2_table(3) := '647953746174653D3D3D576562536F636B65742E4F50454E3F636F6E736F6C652E6C6F67282252544D206C697374656E65723A20736F636B657420616C7265616479206F70656E2C2072657573696E673A222C74293A66756E6374696F6E206528297B63';
wwv_flow_imp.g_varchar2_table(4) := '6F6E736F6C652E6C6F67282252544D206C697374656E657220636F6E6E656374696E6720746F222C742C226368616E6E656C3D222C6E2C226576656E743D222C61293B76617220723D6E657720576562536F636B65742874293B6F2E5F72746D536F636B';
wwv_flow_imp.g_varchar2_table(5) := '65743D722C722E6F6E6F70656E3D66756E6374696F6E28297B636F6E736F6C652E6C6F67282252544D206C697374656E657220636F6E6E65637465643A222C74297D2C722E6F6E6D6573736167653D66756E6374696F6E2865297B766172206F3B747279';
wwv_flow_imp.g_varchar2_table(6) := '7B6F3D4A534F4E2E706172736528652E64617461297D6361746368286F297B72657475726E20766F696420636F6E736F6C652E6572726F72282252544D206C697374656E65723A20696E76616C6964204A534F4E222C6F2C652E64617461297D2166756E';
wwv_flow_imp.g_varchar2_table(7) := '6374696F6E2865297B6966282128652E6368616E6E656C2626652E6368616E6E656C213D3D6E7C7C652E6576656E744E616D652626652E6576656E744E616D65213D3D6129297B696628636F6E736F6C652E6C6F67282252544D206C697374656E657220';
wwv_flow_imp.g_varchar2_table(8) := '7265636569766564206D6573736167653A222C65292C652E7061796C6F61642626652E7061796C6F61642E6974656D4E616D652626766F69642030213D3D652E7061796C6F61642E76616C756526266E756C6C213D3D652E7061796C6F61642E76616C75';
wwv_flow_imp.g_varchar2_table(9) := '6526262222213D3D652E7061796C6F61642E76616C7565262677696E646F772E617065782626617065782E6974656D297472797B617065782E6974656D28652E7061796C6F61642E6974656D4E616D65292E73657456616C756528652E7061796C6F6164';
wwv_flow_imp.g_varchar2_table(10) := '2E76616C7565292C636F6E736F6C652E6C6F67282252544D206C697374656E65723A20736574222C652E7061796C6F61642E6974656D4E616D652C22746F222C652E7061796C6F61642E76616C7565297D6361746368286F297B636F6E736F6C652E7761';
wwv_flow_imp.g_varchar2_table(11) := '726E282252544D206C697374656E65723A20636F756C64206E6F74207365742041504558206974656D222C652E7061796C6F61642E6974656D4E616D652C6F297D77696E646F772E617065782626617065782E6576656E742626617065782E6576656E74';
wwv_flow_imp.g_varchar2_table(12) := '2E747269676765722626617065782E6576656E742E7472696767657228646F63756D656E742C6C2C65297D7D286F297D2C722E6F6E636C6F73653D66756E6374696F6E286F297B636F6E736F6C652E6C6F67282252544D206C697374656E657220636C6F';
wwv_flow_imp.g_varchar2_table(13) := '7365643A222C6F2E636F64652C6F2E726561736F6E7C7C2222292C316533213D3D6F2E636F6465262631303031213D3D6F2E636F6465262628636F6E736F6C652E6C6F67282252544D206C697374656E65723A207265636F6E6E656374696E6720696E20';
wwv_flow_imp.g_varchar2_table(14) := '33303030206D732E2E2E22292C73657454696D656F757428652C33653329297D2C722E6F6E6572726F723D66756E6374696F6E2865297B636F6E736F6C652E6572726F72282252544D206C697374656E6572206572726F723A222C65297D7D28297D';
end;
/
begin
wwv_flow_imp_shared.create_plugin_file(
 p_id=>wwv_flow_imp.id(44001421392179481)
,p_plugin_id=>wwv_flow_imp.id(43922973552184349)
,p_file_name=>'listener.min.js'
,p_mime_type=>'text/javascript'
,p_file_charset=>'utf-8'
,p_file_content=>wwv_flow_imp.varchar2_to_blob(wwv_flow_imp.g_varchar2_table)
);
end;
/
prompt --application/end_environment
begin
wwv_flow_imp.import_end(p_auto_install_sup_obj => nvl(wwv_flow_application_install.get_auto_install_sup_obj, false)
);
commit;
end;
/
set verify on feedback on define on
prompt  ...done
